DROP TABLE USER_;

CREATE TABLE USER_(
        id NUMBER GENERATED by default on null as IDENTITY,
        name varchar(50),
        password varchar(50),
        PRIMARY KEY (id)
);

CREATE TABLE COMPETITION(
        competitionId NUMBER GENERATED by default on null as IDENTITY,
        name varchar(50),
        PRIMARY KEY (competitionId)
);

CREATE TABLE USER_GROUP(
    userId NUMBER,
    groupId NUMBER,
    Primary Key (userId,groupId),
    FOREIGN KEY (userId) REFERENCES USER_(id),
    FOREIGN KEY (groupId) REFERENCES GROUP_(id)
);

CREATE TABLE GROUP_(
    id NUMBER GENERATED by default on null as IDENTITY,
    name varchar(50),
    competitionId NUMBER,
    PRIMARY KEY (id),
    FOREIGN KEY (competitionId)  REFERENCES COMPETITION(competitionId)
);

CREATE TABLE TEAM(
    teamId NUMBER GENERATED by default on null as IDENTITY,
    name varchar(50),
    PRIMARY KEY (teamId)
);

CREATE TABLE FRIENDS (
    userId1 Number,
    userId2 Number,
    Primary Key(userId1, userId2),
    FoREIGN KEY (userId1) REFERENCES USER_(id),
    FoREIGN KEY (userId2) REFERENCES USER_(id)
);
    

CREATE TABLE COMPETITION_TEAM(
    compId NUMBER,
    teamId NUMBER,
    PRIMARY KEY (compId,teamId),
    FOREIGN KEY (compId) REFERENCES COMPETITION(competitionId),
    FOREIGN KEY (teamId) REFERENCES TEAM(teamId)
);
